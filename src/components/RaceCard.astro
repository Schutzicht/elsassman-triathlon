---
interface Props {
    title: string;
    distance: string;
    description: string;
    link: string;
    delay?: string;
}

const { title, distance, description, link, delay = "0" } = Astro.props;
---

<div class="tilt-card group relative bg-gray-900 border border-gray-800 rounded-2xl p-8 hover:bg-gray-800/80 transition-all duration-300 hover:shadow-2xl hover:shadow-red-900/10 transform-style-3d overflow-hidden" style={`animation-delay: ${delay}ms`}>
    <div class="absolute inset-0 bg-gradient-to-br from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
        <svg class="w-24 h-24 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M13 2.05v-2.05h-2v2.05c-5.49.61-9.96 5.03-10.85 10.45h2.03c.85-4.32 4.29-7.79 8.82-8.48v2.98h2v-2.98c4.53.69 7.97 4.16 8.82 8.48h2.03c-.89-5.42-5.36-9.84-10.85-10.45zm-6 13.95h-2c0 3.86 3.14 7 7 7v-2c-2.76 0-5-2.24-5-5zm10 0h2c0 3.86-3.14 7-7 7v-2c2.76 0 5-2.24 5-5z"/>
        </svg>
    </div>
    
    <div class="relative z-10">
        <span class="inline-block px-3 py-1 bg-red-900/30 text-red-500 rounded-full text-xs font-bold uppercase tracking-wider mb-4 border border-red-900/50">
            {distance}
        </span>
        <h3 class="text-3xl font-bold text-white mb-4 font-outfit uppercase">{title}</h3>
        <p class="text-gray-400 mb-8 leading-relaxed">
            {description}
        </p>
        <a href={link} target="_blank" class="inline-flex items-center text-white font-semibold group-hover:text-red-500 transition-colors">
            View Details 
            <svg class="w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
        </a>
    </div>
    </div>
</div>

<script>
    const cards = document.querySelectorAll('.tilt-card');

    cards.forEach((card: any) => {
        let ticking = false;

        card.addEventListener('mousemove', (e: MouseEvent) => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const rotateX = ((y - centerY) / centerY) * -5; // Reduced max rotation for subtlety & perf
                    const rotateY = ((x - centerX) / centerX) * 5;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
                    ticking = false;
                });
                ticking = true;
            }
        });

        card.addEventListener('mouseleave', () => {
             // Reset transform
            card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
        });
    });
</script>
