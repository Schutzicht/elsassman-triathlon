---
interface Props {
  title: string;
  distance: string;
  swim: string;
  bike: string;
  run: string;
  link: string;
  image?: string;
  color?: string;
  delay?: string;
}

const { title, distance, swim, bike, run, link, image, delay = "0", lang = Astro.currentLocale || 'en' } = Astro.props;

const translations = {
  en: {
    type: "Challenge Type",
    swim: "Swim",
    bike: "Bike",
    run: "Run",
    details: "Full Details"
  },
  fr: {
    type: "Type de Défi",
    swim: "Natation",
    bike: "Vélo",
    run: "Course",
    details: "Détails Complets"
  }
};

const t = translations[lang === 'fr' ? 'fr' : 'en'];
---

<a href={link} class={`group relative block w-full animate-fade-in-up`} style={`animation-delay: ${delay}ms`}>
  <div class="relative bg-brand-surface/30 backdrop-blur-md border border-white/5 p-8 transition-all duration-700 group-hover:bg-brand-surface/60 group-hover:border-brand-primary/30 overflow-hidden">
    
    {image && (
        <img 
            src={image} 
            alt={title} 
            class="absolute inset-0 w-full h-full object-cover opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-700"
        />
    )}
    
    <!-- Decorative Corner -->
    <div class="absolute top-0 right-0 w-16 h-16 pointer-events-none overflow-hidden">
        <div class="absolute top-[-32px] right-[-32px] w-16 h-16 bg-brand-primary/20 rotate-45 group-hover:bg-brand-primary/40 transition-colors"></div>
    </div>

    <div class="mb-12">
        <div class="flex items-center gap-3 mb-2">
            <span class="w-2 h-2 bg-brand-primary rounded-full animate-pulse"></span>
            <span class="font-tech text-[10px] font-black uppercase tracking-[0.3em] text-white/40">{t.type}</span>
        </div>
        <h3 class="text-3xl md:text-5xl font-black text-white group-hover:text-brand-primary transition-colors duration-500 leading-none mb-2">{title}</h3>
        <p class="font-tech text-xs text-white/40 uppercase tracking-widest">{distance}</p>
    </div>

    <div class="grid grid-cols-3 gap-2 border-y border-white/5 py-6 mb-8 group-hover:border-white/10 transition-colors">
        <div class="text-center">
            <span class="block font-tech text-[10px] text-white/30 uppercase mb-1">{t.swim}</span>
            <span class="block font-display text-lg font-black">{swim}</span>
        </div>
        <div class="text-center border-x border-white/5 group-hover:border-white/10 transition-colors">
            <span class="block font-tech text-[10px] text-white/30 uppercase mb-1">{t.bike}</span>
            <span class="block font-display text-lg font-black">{bike}</span>
        </div>
        <div class="text-center">
            <span class="block font-tech text-[10px] text-white/30 uppercase mb-1">{t.run}</span>
            <span class="block font-display text-lg font-black">{run}</span>
        </div>
    </div>

    <div class="flex justify-between items-center group-hover:translate-x-2 transition-all duration-500">
        <div class="flex items-center gap-2">
            <div class="w-8 h-[1px] bg-brand-primary/50 group-hover:w-12 transition-all"></div>
            <span class="font-tech text-[10px] font-black uppercase tracking-widest text-white/60 group-hover:text-white">{t.details}</span>
        </div>
        <svg class="w-4 h-4 text-brand-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="square" stroke-linejoin="round" stroke-width="3" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
    </div>

    <!-- Background Data Graphics -->
    <div class="absolute bottom-2 right-8 opacity-[0.05] pointer-events-none group-hover:opacity-[0.1] transition-opacity">
        <span class="font-tech text-6xl font-black uppercase leading-none">0{delay.length}</span>
    </div>
  </div>
</a>

<style>
  .animate-fade-in-up {
    animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(40px);
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
