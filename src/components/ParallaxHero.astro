---
interface Props {
  title: string;
  tagline: string;
  backgroundImage?: string;
  videoUrl?: string;
  lang?: string;
}

const { title, tagline, backgroundImage = '/assets/hero-placeholder.jpg', videoUrl, lang = Astro.currentLocale || 'en' } = Astro.props;

const translations = {
  en: {
    swim: "Swim",
    swimSpan: "Fast",
    bike: "Bike",
    bikeSpan: "Strong",
    run: "Run to",
    runSpan: "Win",
    register: "Register Now",
    explore: "Explore Races",
    gps: "GPS COORDINATES",
    altitude: "ALTITUDE GAIN",
    status: "STATUS: OPEN FOR REGISTRATION"
  },
  fr: {
    swim: "Nagez",
    swimSpan: "Vite",
    bike: "Roulez",
    bikeSpan: "Fort",
    run: "Courez pour",
    runSpan: "Gagner",
    register: "S'inscrire",
    explore: "Découvrir",
    gps: "COORDONNÉES GPS",
    altitude: "GAIN D'ALTITUDE",
    status: "STATUT: INSCRIPTIONS OUVERTES"
  }
};

const t = translations[lang === 'fr' ? 'fr' : 'en'];
---

<section class="relative h-screen min-h-[700px] flex items-center overflow-hidden bg-black">
  <!-- Dynamic Background -->
  <div class="absolute inset-0 z-0">
    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent z-10 w-full h-full"></div>
    <div class="absolute inset-0 bg-brand-primary/5 mix-blend-overlay z-10"></div>
    {videoUrl ? (
      <video class="w-full h-full object-cover opacity-60 rotate-180" autoplay muted loop playsinline>
        <source src={videoUrl} type="video/mp4" />
      </video>
    ) : (
      <img src={backgroundImage} alt="Hero" class="w-full h-full object-cover opacity-60 scale-110 animate-cinematic-zoom" />
    )}
  </div>

  <!-- Central Visual Element: HUD overlay hint -->
  <div class="absolute inset-0 pointer-events-none z-10 opacity-20">
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90vw] max-w-7xl h-[80vh] border border-white/10"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-[1px] bg-white/5"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-full w-[1px] bg-white/5"></div>
  </div>

  <!-- Content -->
  <div class="relative z-20 w-full max-w-7xl mx-auto px-6 lg:px-12 pt-32 lg:pt-40">
    <div class="flex items-center gap-4 mb-8 animate-fade-in" style="animation-delay: 0.2s;">
        <div class="w-12 h-[1px] bg-brand-primary"></div>
        <span class="font-tech text-xs font-black uppercase tracking-[0.4em] text-brand-primary">{title}</span>
    </div>

    <h1 class="text-5xl md:text-7xl lg:text-8xl xl:text-[clamp(4rem,8vw,9rem)] leading-[0.9] font-bold uppercase tracking-tight mb-8 animate-reveal" style="animation-delay: 0.4s;">
      <span class="block text-white">{t.swim} <span class="text-brand-primary">{t.swimSpan}</span></span>
      <span class="block text-white">{t.bike} <span class="text-brand-primary">{t.bikeSpan}</span></span>
      <span class="block text-white">{t.run} <span class="text-brand-primary">{t.runSpan}</span></span>
    </h1>
    
    <p class="font-body text-lg md:text-xl text-white/50 max-w-2xl mb-12 uppercase tracking-widest font-bold animate-reveal" style="animation-delay: 0.6s;">
      {tagline}
    </p>
    
    <div class="flex flex-col md:flex-row gap-8 justify-start items-start md:items-center animate-reveal" style="animation-delay: 0.8s;">
      <a href={`/${lang}/inscriptions`} class="btn-primary">
         {t.register}
      </a>
      <a href={`/${lang}/#races`} class="btn-secondary group">
        {t.explore}
        <span class="inline-block ml-2 group-hover:translate-x-1 transition-transform">→</span>
      </a>
    </div>
  </div>

  <!-- Data Stream Overlay -->
  <div class="absolute bottom-12 right-12 text-right opacity-30 font-tech text-[10px] z-20 hidden lg:block">
      <div class="mb-2">{t.gps}: 47.9077° N, 7.2132° E</div>
      <div class="mb-2">{t.altitude}: +2500M</div>
      <div class="text-brand-primary">{t.status}</div>
  </div>
</section>

<style>
  .animate-cinematic-zoom {
    animation: zoom 30s infinite alternate cubic-bezier(0.445, 0.05, 0.55, 0.95);
  }
  
  @keyframes zoom {
    from { transform: scale(1.1); }
    to { transform: scale(1.3); }
  }

  .animate-reveal {
      animation: reveal 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  @keyframes reveal {
      from { 
          opacity: 0.5;
          transform: translateY(20px);
      }
      to { 
          opacity: 1;
          transform: translateY(0);
      }
  }

  .animate-fade-in {
      animation: fadeIn 1s ease-out forwards;
  }

  @keyframes fadeIn {
      to { opacity: 1; }
  }
</style>
